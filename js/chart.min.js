function randomColor(e,t){return""===e?arrayColor[t-1]:e}function calcMilliseconds(e,t){return Date.UTC(t.getYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())-Date.UTC(e.getYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())}function millisecondsToDays(e){return e/1e3/60/60/24}function millisecondsToHours(e){return e/1e3/60/60}function millisecondsToMinutes(e){return e/1e3/60}function millisecondsToSeconds(e){return e/1e3}function stringLimit(e){return e.toString().length>13?e.substring(0,10)+"...":e}function formatMonth(e){var t=new Array(12);return t[0]="jan",t[1]="feb",t[2]="mar",t[3]="apr",t[4]="may",t[5]="jun",t[6]="jul",t[7]="aug",t[8]="sep",t[9]="oct",t[10]="nov",t[11]="dec",t[e]}function formatTime(e){for(var t,a=new Array(3600,60,1),o="",s=0;s<a.length;s++)t=Math.floor(e/a[s]),1>t?t="00":10>t&&(t="0"+t),o+=t,2>s&&(o+=":"),e%=a[s];return o}function calcProgress(e,t,a,o){var s=[];switch(e){case"month":s.push(3*(millisecondsToDays(calcMilliseconds(t,a))+1.2)),s.push(3*millisecondsToDays(calcMilliseconds(a,o))),s.push(a.toLocaleDateString()+" à "+o.toLocaleDateString()),s.push(Math.ceil(millisecondsToDays(calcMilliseconds(a,o)))+" days");break;case"day":s.push(2*(millisecondsToHours(calcMilliseconds(t,a))+2)),s.push(2*millisecondsToHours(calcMilliseconds(a,o))),s.push(a.toLocaleDateString()+" à "+o.toLocaleDateString()),s.push(Math.ceil(millisecondsToDays(calcMilliseconds(a,o)))+" days");break;case"hour":s.push(millisecondsToMinutes(calcMilliseconds(t,a))+4),s.push(millisecondsToMinutes(calcMilliseconds(a,o))),s.push(a.toLocaleTimeString()+" à "+o.toLocaleTimeString()),s.push(formatTime(millisecondsToSeconds(calcMilliseconds(a,o)))+" hours")}return s}function addRow(e,t,a,o,s){var n={id:e,value:t,start:new Date(a),end:new Date(o),background:s};return n}function drawChart(e,t){for(var a="",o="",s="<div class='subtitle'><ul>",n=null,l=0,r="",i=1,c="",d=!!document.documentMode,u=0;u<e.length;u++){var m=calcProgress(t.mode.type,new Date(t.time.start),new Date(e[u].start),new Date(e[u].end));if(console.log(e[u].start+" - "+e[u].end),e[u].id===r)o+="<section class='data' style='background-color: "+c+"; left: "+m[0]+"px; width: "+m[1]+"px;'><section><h4 style='color: "+c+"'>"+e[u].value+"</h4><p>Period: "+m[2]+"</p><p>Duration: "+m[3]+"</p></section></section>";else{for(a=a.replace("@data"+r,o),r=e[u].id,c=randomColor(e[u].background,i),n=new Date(t.time.start),o="<section class='data' style='background-color: "+c+"; left: "+m[0]+"px; width: "+m[1]+"px;'><section><h4 style='color: "+c+"'>"+e[u].value+"</h4><p>Period: "+m[2]+"</p><p>Duration: "+m[3]+"</p></section></section>",a+="<div><section class='id'>"+stringLimit(e[u].value)+"</section>@data"+r+"<ul>";n<=new Date(t.time.end);)switch(a+="<li class='"+t.mode.type+"'></li>",t.mode.type){case"month":0===u&&(s+="<li class='"+t.mode.type+"'><span>"+formatMonth(n.getMonth())+"/"+n.getFullYear()+"</span></li>",l=90),n.setMonth(n.getMonth()+1);break;case"day":0===u&&(s+=d?"<li class='"+t.mode.type+"'><span>"+n.toLocaleDateString().substring(1,3)+"</span></li>":"<li class='"+t.mode.type+"'><span>"+n.toLocaleDateString().substring(0,2)+"</span></li>",l=48),n.setDate(n.getDate()+1);break;case"hour":0===u&&(s+=d?"<li class='"+t.mode.type+"'><span>"+n.toLocaleTimeString().substring(1,8)+"</span></li>":"<li class='"+t.mode.type+"'><span>"+n.toLocaleTimeString().substring(0,5)+"</span></li>",l=60),n.setHours(n.getHours()+1)}a+="</ul></div>",i<arrayColor.length?++i:i=1}}a=a.replace("@data"+r,o),document.getElementById("chart_title").innerHTML=t.title.value,document.getElementById("chart_data").innerHTML=a+s+"</ul></div>";var g=document.getElementById("chart_data").getElementsByTagName("div");l+=l*document.getElementsByClassName("subtitle")[0].childNodes[0].getElementsByTagName("span").length;for(var u=0;u<g.length;u++)g[u].style.minWidth=l+"px";document.getElementById("chart_data").style.visibility="visible"}var arrayColor=new Array;arrayColor[0]="#5e97f6",arrayColor[1]="#db4437",arrayColor[2]="#25b870",arrayColor[3]="#ee8100",arrayColor[4]="#6a1b9a",arrayColor[5]="#f25b5b",arrayColor[6]="#ab47bc",arrayColor[7]="#f0cd0c",arrayColor[8]="#566887";