function randomColor(e,t){return""===e?arrayColor[t-1]:e}function calcMilliseconds(e,t){return Date.UTC(t.getYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())-Date.UTC(e.getYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())}function millisecondsToDays(e){return e/1e3/60/60/24}function millisecondsToHours(e){return e/1e3/60/60}function millisecondsToMinutes(e){return e/1e3/60}function millisecondsToSeconds(e){return e/1e3}function stringLimit(e){return e.toString().length>13?e.substring(0,10)+"...":e}function formatMonth(e){var t=new Array(12);return t[0]="jan",t[1]="feb",t[2]="mar",t[3]="apr",t[4]="may",t[5]="jun",t[6]="jul",t[7]="aug",t[8]="sep",t[9]="oct",t[10]="nov",t[11]="dec",t[e]}function formatTime(e){for(var t,a=new Array(3600,60,1),o="",n=0;n<a.length;n++)t=Math.floor(e/a[n]),1>t?t="00":10>t&&(t="0"+t),o+=t,2>n&&(o+=":"),e%=a[n];return o}function calcProgress(e,t,a,o){var n=[];switch(e){case"month":n.push(3*(millisecondsToDays(calcMilliseconds(t,a))+1.2)),n.push(3*millisecondsToDays(calcMilliseconds(a,o))),n.push(a.toLocaleDateString()+" à "+o.toLocaleDateString()),n.push(Math.ceil(millisecondsToDays(calcMilliseconds(a,o)))+" days");break;case"day":n.push(2*(millisecondsToHours(calcMilliseconds(t,a))+2)),n.push(2*millisecondsToHours(calcMilliseconds(a,o))),n.push(a.toLocaleDateString()+" à "+o.toLocaleDateString()),n.push(Math.ceil(millisecondsToDays(calcMilliseconds(a,o)))+" days");break;case"hour":n.push(millisecondsToMinutes(calcMilliseconds(t,a))+4),n.push(millisecondsToMinutes(calcMilliseconds(a,o))),n.push(a.toLocaleTimeString()+" à "+o.toLocaleTimeString()),n.push(formatTime(millisecondsToSeconds(calcMilliseconds(a,o)))+" hours")}return n}function customChart(e,t,a,o){var n={mode:{type:e},title:{value:o},time:{start:t,end:a}};return n}function addRow(e,t,a,o,n){var s={id:e,value:t,start:new Date(a),end:new Date(o),background:n};return s}function drawChart(e,t){for(var a="",o="",n="<div class='subtitle'><ul>",s=null,l=null,r=0,i="",c=1,d="",u=!!document.documentMode,m=null,g=0;g<e.length;g++)if(m=calcProgress(t.mode.type,new Date(t.time.start),new Date(e[g].start),new Date(e[g].end)),e[g].id===i)o+="<section class='data' style='background-color: "+d+"; left: "+m[0]+"px; width: "+m[1]+"px;'><section><h4 style='color: "+d+"'>"+e[g].value+"</h4><p>Period: "+m[2]+"</p><p>Duration: "+m[3]+"</p></section></section>";else{for(a=a.replace("@data"+i,o),i=e[g].id,d=randomColor(e[g].background,c),s=new Date(t.time.start),o="<section class='data' style='background-color: "+d+"; left: "+m[0]+"px; width: "+m[1]+"px;'><section><h4 style='color: "+d+"'>"+e[g].value+"</h4><p>Period: "+m[2]+"</p><p>Duration: "+m[3]+"</p></section></section>",a+="<div><section class='id'>"+stringLimit(e[g].value)+"</section>@data"+i+"<ul>";s<=new Date(t.time.end);)switch(a+="<li class='"+t.mode.type+"'></li>",t.mode.type){case"month":0===g&&(n+="<li class='"+t.mode.type+"'><span>"+formatMonth(s.getMonth())+"/"+s.getFullYear()+"</span></li>",r=90),s.setMonth(s.getMonth()+1);break;case"day":0===g&&(l=u?s.toLocaleDateString().substring(1,3):s.toLocaleDateString().substring(0,2),n+="<li class='"+t.mode.type+"'><span>"+l+"</span></li>",r=48),s.setDate(s.getDate()+1);break;case"hour":0===g&&(l=u?s.toLocaleDateString().substring(1,8):s.toLocaleDateString().substring(0,5),n+="<li class='"+t.mode.type+"'><span>"+l+"</span></li>",r=60),s.setHours(s.getHours()+1)}a+="</ul></div>",c<arrayColor.length?++c:c=1}a=a.replace("@data"+i,o),document.getElementById("chart_title").innerHTML=t.title.value,document.getElementById("chart_data").innerHTML=a+n+"</ul></div>";var h=document.getElementById("chart_data").getElementsByTagName("div");r+=r*document.getElementsByClassName("subtitle")[0].childNodes[0].getElementsByTagName("span").length;for(var g=0;g<h.length;g++)h[g].style.minWidth=r+"px";document.getElementById("chart_data").style.visibility="visible"}var arrayColor=new Array;arrayColor[0]="#5e97f6",arrayColor[1]="#db4437",arrayColor[2]="#25b870",arrayColor[3]="#ee8100",arrayColor[4]="#6a1b9a",arrayColor[5]="#f25b5b",arrayColor[6]="#ab47bc",arrayColor[7]="#f0cd0c",arrayColor[8]="#566887";
